/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v1.2.0
 * @link https://github.com/mariapazz/angular-libphonenumber
 * @license Apache-2.0
 */
!function(e){/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v1.2.0
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache-2.0
 * Forked by: @mariapazz
 */
!function(e){e.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log",function(e){function t(e){return e?e.replace(/([^0-9|+])/g,""):e}function n(t,n){var r=t;try{r=phoneUtils.formatAsTyped(t,n)}catch(t){e.debug(t)}return r}return{restrict:"A",require:"?ngModel",scope:{countryCode:"=",nonFormatted:"=?",phoneType:"="},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(r,o,u,i){function c(e){var o=t(e);r.nonFormatted=o;var u="";return u=o&&o.length>1?n(o,r.countryCode):o,u.trim()}function l(e){return i.$isEmpty(e)?e:n(t(e),r.countryCode)}function a(e){if(i.$isEmpty(e))return r.nonFormatted="",e;var n=c(e);if(n===e)return e;var o=d.selectionStart,u=d.selectionEnd+n.length-e.length;return e.length<n.length&&(o+=n.length-e.length),e.length>n.length+1&&(o-=n.length-e.length),i.$setViewValue(n),i.$render(),d.setSelectionRange(o,u),t(n)}function s(t){var n=!1,o="";try{o=phoneUtils.getNumberType(t,r.countryCode),"MOBILE"!==o&&"FIXED_LINE_OR_MOBILE"!==o||(n=!0)}catch(t){e.debug(t)}return i.$isEmpty(t)||n}function h(t){var n=!1;try{n=phoneUtils.isValidNumberForRegion(t,r.countryCode)}catch(t){e.debug(t)}return i.$isEmpty(t)||n}function p(e){var t=!1;return t="mobile"===r.phoneType?s(e):h(e),i.$setValidity("phoneNumber",t),e}var d=o[0];r.$watch("countryCode",function(){i.$modelValue=i.$viewValue+" "}),i.$formatters.push(l),i.$formatters.push(p),i.$parsers.push(a),i.$parsers.push(p)}}}])}(e)}(angular);