/**
 * angular-libphonenumber
 * Paz MuÃ±oz libphonenumber validate mobile phone number
 * @version v1.1.4
 * @link https://github.com/mariapazz/angular-libphonenumber
 * @license Apache-2.0
 */
!function(e){e.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log","$window",function(e,n){function t(e){return e?e.replace(/([^0-9|+])/g,""):e}function r(t,r){var o=t;try{o=n.phoneUtils.formatAsTyped(t,r)}catch(n){e.debug(n)}return o}return{restrict:"A",require:"?ngModel",scope:{countryCode:"=",nonFormatted:"=?",countryNumber:"="},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(o,u,l,c){function i(e){var n=t(e);o.nonFormatted=n;return(n&&n.length>1?r(n,o.countryCode):n).trim()}function a(t){console.log("number",o.countryNumber);var r=!1,u=!1,l="";try{var i=o.countryNumber+t;r=n.phoneUtils.isValidNumberForRegion(i,o.countryCode),"MOBILE"!==(l=n.phoneUtils.getNumberType(i,o.countryCode))&&"FIXED_LINE_OR_MOBILE"!==l||(u=!0)}catch(n){e.debug(n)}var a=c.$isEmpty(t)||r&&u;return c.$setValidity("phoneNumber",a),console.log("Number: ",t,a),console.log("number type",l),t}var s=u[0];o.$watch("countryCode",function(){c.$modelValue=c.$viewValue+" "}),o.$watch("countryNumber",function(){c.$modelValue=c.$viewValue+" "}),c.$formatters.push(function(e){return c.$isEmpty(e)?e:r(t(e),o.countryCode)}),c.$formatters.push(a),c.$parsers.push(function(e){if(c.$isEmpty(e))return o.nonFormatted="",e;var n=i(e);if(n===e)return e;var r=s.selectionStart,u=s.selectionEnd+n.length-e.length;return e.length<n.length&&(r+=n.length-e.length),e.length>n.length+1&&(r-=n.length-e.length),c.$setViewValue(n),c.$render(),s.setSelectionRange(r,u),t(n)}),c.$parsers.push(a)}}}])}(angular);
